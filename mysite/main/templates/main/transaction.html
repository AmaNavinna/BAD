{%load static%}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Ticket Reservation</title>
    <link href="{% static 'css/styles.css' %}" rel="stylesheet">
    <link href="{% static 'css/indexStyles.css' %}" rel="stylesheet">
    
</head>

<body>
    <header>
        <h1>Reserve Your Tickets</h1>
    </header>

    <section class="booking-section">
        <div class="screen-section">
            <h2>Screen</h2>
            <!-- You can customize the screen content here -->
            <div class="screen">Screen Content</div>
        </div>

        <div class="booking-details">
            <h2>Select a Date</h2>
            <input type="datetime-local">

            <h2>Select a Movie</h2>
            <select>
                <option value="movie1">Movie 1</option>
                <option value="movie2">Movie 2</option>
                <option value="movie3">Movie 3</option>
            </select>

            <h2>Select Show Time</h2>
            <select>
                <option value="time1">8:00 AM</option>
                <option value="time2">11:00 AM</option>
                <option value="time3">2:00 PM</option>
                <option value="time3">5:00 PM</option>
                <option value="time3">8:00 PM</option>
            </select>
        </div>
    </section>

    <section>
        <h2>Your Details</h2>
        <label for="name">Name</label>
        <input type="text" id="name" placeholder="Your Name">

        <label for="email">Email</label>
        <input type="email" id="email" placeholder="Your Email">

        <label for="phone">Phone Number</label>
        <input type="tel" id="phone" placeholder="Your Phone Number">
    </section>

    <section>
        <h2>Pick a Seat</h2>
        <table id="seatTable">
            <thead>
                <tr>
                    <th></th>
                    <th>A</th>
                    <th>B</th>
                    <th>C</th>
                    <th>D</th>
                    <th>E</th>
                    <th>F</th>
                    <th>G</th>
                    <th>H</th>
                    <th>I</th>
                    <th>J</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Row 1</td>
                    <td class="seat" data-price="10">A1</td>
                    <td class="seat" data-price="10">B1</td>
                    <td class="seat" data-price="10">C1</td>
                    <td class="seat" data-price="10">D1</td>
                    <td class="seat" data-price="15">E1</td>
                    <td class="seat" data-price="15">F1</td>
                    <td class="seat" data-price="15">G1</td>
                    <td class="seat" data-price="20">H1</td>
                    <td class="seat" data-price="20">I1</td>
                    <td class="seat" data-price="20">J1</td>
                </tr>
                <tr>
                    <td>Row 2</td>
                    <td class="seat" data-price="10">A1</td>
                    <td class="seat" data-price="10">B1</td>
                    <td class="seat" data-price="10">C1</td>
                    <td class="seat" data-price="10">D1</td>
                    <td class="seat" data-price="15">E1</td>
                    <td class="seat" data-price="15">F1</td>
                    <td class="seat" data-price="15">G1</td>
                    <td class="seat" data-price="20">H1</td>
                    <td class="seat" data-price="20">I1</td>
                    <td class="seat" data-price="20">J1</td>
                </tr>
                <tr>
                    <td>Row 3</td>
                    <td class="seat" data-price="10">A1</td>
                    <td class="seat" data-price="10">B1</td>
                    <td class="seat" data-price="10">C1</td>
                    <td class="seat" data-price="10">D1</td>
                    <td class="seat" data-price="15">E1</td>
                    <td class="seat" data-price="15">F1</td>
                    <td class="seat" data-price="15">G1</td>
                    <td class="seat" data-price="20">H1</td>
                    <td class="seat" data-price="20">I1</td>
                    <td class="seat" data-price="20">J1</td>
                </tr>
                <tr>
                    <td>Row 4</td>
                    <td class="seat" data-price="10">A1</td>
                    <td class="seat" data-price="10">B1</td>
                    <td class="seat" data-price="10">C1</td>
                    <td class="seat" data-price="10">D1</td>
                    <td class="seat" data-price="15">E1</td>
                    <td class="seat" data-price="15">F1</td>
                    <td class="seat" data-price="15">G1</td>
                    <td class="seat" data-price="20">H1</td>
                    <td class="seat" data-price="20">I1</td>
                    <td class="seat" data-price="20">J1</td>
                </tr>
                <tr>
                    <td>Row 5</td>
                    <td class="seat" data-price="10">A1</td>
                    <td class="seat" data-price="10">B1</td>
                    <td class="seat" data-price="10">C1</td>
                    <td class="seat" data-price="10">D1</td>
                    <td class="seat" data-price="15">E1</td>
                    <td class="seat" data-price="15">F1</td>
                    <td class="seat" data-price="15">G1</td>
                    <td class="seat" data-price="20">H1</td>
                    <td class="seat" data-price="20">I1</td>
                    <td class="seat" data-price="20">J1</td>
                </tr>
            </tbody>
        </table>
    </section>

    <section class="payment-section">
        <h2>Payment Details</h2>
        <label for="cardNumber">Card Number</label>
        <input type="text" id="cardNumber" placeholder="Card Number">

        <label for="expiryDate">Expiry Date</label>
        <input type="datetime-local" id="expiryDate">

        <label for="cvv">CVV</label>
        <input type="text" id="cvv" placeholder="CVV">

        <label for="cardHolderName">Card Holder Name</label>
        <input type="text" id="cardHolderName" placeholder="Card Holder Name">

        <p>Total Price: $<span id="totalPrice">0</span></p>
        <button onclick="processPayment()" class="btn btn-primary mt-auto" id="paymentButton">Submit Payment</button>
    </section>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            document.getElementById("seatTable").addEventListener("click", function (event) {
                if (event.target.classList.contains("seat") && !event.target.classList.contains("reserved")) {
                    toggleSeatSelection(event.target);
                }
            });
        });

        function toggleSeatSelection(seat) {
            seat.classList.toggle("selected");
            updateTotalPrice();
        }

        function updateTotalPrice() {
            const selectedSeats = document.querySelectorAll('.seat.selected');
            let totalPrice = 0;

            selectedSeats.forEach(seat => {
                const seatPrice = parseFloat(seat.getAttribute('data-price')) || 0;
                totalPrice += seatPrice;
            });

            document.getElementById('totalPrice').textContent = totalPrice.toFixed(2);
        }

        function processPayment() {
            const selectedSeats = document.querySelectorAll('.seat.selected');
            selectedSeats.forEach(seat => {
                seat.classList.add("reserved");
            });

            alert("Payment processed successfully!");
            // In a real-world scenario, you would handle the payment processing on the server side.
        }
        document.getElementById('paymentButton').addEventListener('click', function() {
            window.location.href = "{% url 'main:home' %}";
        });
    </script>
</body>

</html>
